@using MegaAuctions.Models;
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout_Seller.cshtml";
    List<TypeBlog> typeblog = ViewBag.TypeBlog;
}
<link href="~/assets/css/style.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
<link rel='stylesheet' href='https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css'>
<link rel='stylesheet' href='https://cdn.datatables.net/buttons/1.2.2/css/buttons.bootstrap.min.css'>
<link rel="stylesheet" href="~/css/uploadimage.css">
<style>
    .container label {
        margin-top: 15px;
        font-family: inherit;
        font-size: 17px;
    }

    .container h3 {
        height: 50px;
        background-color: aquamarine;
        align-items: center;
        justify-content: center;
        display: flex;
    }



    .backtolict a {
        color: Highlight;
    }

    .backtolict {
        margin-top: 10px;
    }

    .tab_list_nav_pro {
        display: flex;
    }

    .infoproduct {
        width: 65%;
        margin-right: 13px;
        background-color: #faffeb;
        padding: 30px;
    }

    .dateandprice {
        width: 35%;
        background-color: aliceblue;
        padding: 30px;
    }

    label {
        margin-left: 5px;
    }

    .tab_list_nav_pro h4 {
        font-size: 22px;
    }

    .inputurl {
        visibility: hidden;
    }
</style>
<div style=" margin: 100px 0px 50px 240px;">
    @using (Html.BeginForm("Create", "Blog", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        <div class="container mt-3">
            <h3 class="text-center">THÊM BLOG</h3>
            <form method="post">
                <div class="tab_list_nav_pro">
                    <div class="infoproduct">
                        <h4 class="text-center">Thông tin Blog</h4>
                        <label for="titleblog">Tiêu đề blog: </label>
                        <input type="text" name="titleblog" class="form-control">

                        <label for="idtypeblog">Loại tin: </label>
                        <select class="form-control" name="nametb">
                            @foreach (var type in typeblog)
                            {
                                <option>@type.idtypeblog. @type.nametb</option>
                            }
                        </select>
                        <label for="contentblog">Nội dung blog: </label>
                        <textarea type="text" name="contentblog" class="form-control" style=" height: 240px"></textarea>

                    </div>
                    @*chỗ này chưa có chọn loại tin, với thiếu vài input*@


                    <div class="dateblog" style="background-color: antiquewhite">
                        <h4 class="text-center">Thêm ảnh</h4>
                        <div class="container_image">
                            <input type="file" id="file-input" accept="image/png, image/jpeg" onchange="preview()" multiple name="upfiles">
                            <label for="file-input">
                                <i class="fas fa-upload"></i> &nbsp; Choose A Photo
                            </label>
                            <p id="num-of-files">No Files Chosen</p>
                            <div id="images"></div>
                            <input class="inputurl" id="idimage01" name="image1" />
                            <input class="inputurl" id="idimage02" name="image2" />
                            <input class="inputurl" id="idimage03" name="image3" />
                        </div>
                        @{
                            DateTime today = DateTime.Now;
                            var formatday = "";
                            if (today.Month.ToString().Length == 1 && today.Day.ToString().Length == 1)
                            {
                                formatday = today.Year + "-0" + today.Month + "-0" + today.Day;
                            }
                            else if (today.Day.ToString().Length == 1 && today.Month.ToString().Length != 1)
                            {
                                formatday = today.Year + "-" + today.Month + "-0" + today.Day;
                            }
                            else if (today.Month.ToString().Length == 1 && today.Day.ToString().Length != 1)
                            {
                                formatday = today.Year + "-" + today.Month + "-0" + today.Day;
                            }
                            else
                            {
                                formatday = today.Year + "-" + today.Month + "-" + today.Day;
                            }

                        }
                        <div class="dateblog">
                            <div style="display: flex">
                                <div style="width: 70%; margin-right: 5px;">
                                    <label for="datestart">Ngày bắt đầu: </label>
                                    <input type="date" name="datestart" class="form-control" value="@formatday">
                                </div>
                            
                            </div>
                            <div style="display: flex">
                                <div style="width: 70%; margin-right: 5px;">
                                    <label for="dateend">Ngày kết thúc: </label>
                                    <input type="date" name="dateend" class="form-control" value="@formatday">
                                </div>
                            
                            </div>
                        </div>
                    </div>
                   
                </div>
                <br />
                <input type="submit" value="Thêm mới" class="btn btn-success" style=" width: 120px; height: 40px; margin-top: 10px">
                <div class="backtolict">
                    @Html.ActionLink("Back to List", "Index")
                </div>
            </form>
        </div>
    }
</div>
<script>
    let fileInput = document.getElementById("file-input");
    let imageContainer = document.getElementById("images");
    let numOfFiles = document.getElementById("num-of-files");

    function preview() {
        imageContainer.innerHTML = "";
        numOfFiles.textContent = `${fileInput.files.length} Files Selected`;

        var num = 1;
        var url1 = "";
        for (i of fileInput.files) {
            let reader = new FileReader();
            let figure = document.createElement("figure");
            let figCap = document.createElement("figcaption");
            figCap.innerText = i.name;
            url1 = i.name;
            figure.appendChild(figCap);
            reader.onload = () => {
                let img = document.createElement("img");
                img.setAttribute("src", reader.result);
                img.setAttribute("style", "width: 120px; height: 120px; object-fit: cover;");
                figure.insertBefore(img, figCap);
            }
            imageContainer.appendChild(figure);
            reader.readAsDataURL(i);
            var id = "idimage0" + num;
            document.getElementById(id).value = url1; num++;
        }
        num = 1;
    }
    function format_curency(a) {
        a.value = a.value.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
    }

    $(document).ready(function () {
        $('.quantity-input').bind("cut copy paste drag drop", function (e) {
            e.preventDefault();
        });
    });
    function isNumberKey(e) {
        var charCode = (e.which) ? e.which : e.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
</script>