@using MegaAuctions.Models;
@{
    ViewBag.Title = "Detail Product";
    Product depro = ViewBag.DetailProduct;
    List<Auction> dsauction = ViewBag.TableAuction;
    string check = Content.RoleUser;
    int vitri = Content.FindVt(dsauction, depro.idproduct);
    string rowfirst = "rowfirst1";
}
<style>
    .mk-product__content .mk-tabs {
        margin-left: 20px;
        margin-right: 40px;
        text-align: justify;
    }

    .mk-page--product {
        margin: 50px 30px 0px 0px;
    }

    .home-detail-pro {
        margin: 30px 50px 0px 60px;
    }

    #pricesuccess {
        color: white;
        position: absolute;
        z-index: 0;
        top: 160px;
        right: 0px;
        width: 0px;
        height: 70px;
        font-size: 20px;
        padding: 20px 15px 15px 30px;
        border-radius: 7px;
        transition: 0.6s cubic-bezier(0, 1.1, 0.5, 1.2);
    }
    .rowfirst1{
        background-color: aqua;
    }
</style>
@if (Content.StatusSSPrice == "Auction failed, Minimum bid is 10,000 more than current price!")
{
    <script>
        function auctionfail() {
            document.getElementById("auctionfailed").style.backgroundColor = "#ef3a3a";
            document.getElementById("auctionfailed").style.width = "530px";
            document.getElementById("auctionfailed").style.height = "60px";
            document.getElementById("auctionfailed").style.color = "white";
            document.getElementById("auctionfailed").style.color = "white";
            document.getElementById("auctionfailed").style.fontSize = "18px";
            document.getElementById("auctionfailed").style.position = "absolute";
            document.getElementById("auctionfailed").style.zIndex = "100";
            document.getElementById("auctionfailed").style.right = "0";
            document.getElementById("auctionfailed").style.padding = "10px";
        }
        setTimeout(auctionfail, 1000);
        function displayuactionfail() {
            document.getElementById("auctionfailed").style.transition = "visibility 3s, opacity 3s linear;";
            document.getElementById("auctionfailed").style.opacity = "0";
        }
        setTimeout(displayuactionfail, 4000);
    </script>
    <div id="auctionfailed">@Content.StatusSSPrice</div>
    {
        Content.StatusSSPrice = "";
    } 
 }
@if (Content.StatusSSPrice == "Auction success!")
{
    <script>
        function pricesuccess12() {
            document.getElementById("pricesuccess").style.zIndex = "100";
            document.getElementById("pricesuccess").style.backgroundColor = "#4bb84b";
            document.getElementById("pricesuccess").style.width = "320px";
        }
        setTimeout(pricesuccess12, 1000);
        function displayprice() {
            document.getElementById("pricesuccess").style.transition = "visibility 3s, opacity 3s linear;";
            document.getElementById("pricesuccess").style.opacity = "0";
        }
        setTimeout(displayprice, 4000);
    </script>
    <div id="pricesuccess">@Content.StatusSSPrice</div>
    {
        Content.StatusSSPrice = "";
    }
}
<div class="home-detail-pro">
    <div class="mk-container">
        <div class="mk-page__container">
            <div class="mk-page__left">
                <div class="mk-product--detail mk-product--fullwidth">
                    <div class="mk-product__header">
                        <div class="mk-product__thumbnail" data-vertical="true">
                            <figure>
                                <div class="mk-wrapper">
                                    <div class="mk-product__gallery" data-arrow="true">
                                        <div class="item"><a href="~/img/products/ProductofUser/@depro.ImageProduct.image1"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image1" alt=""></a></div>
                                        <div class="item"><a href="~/img/products/ProductofUser/@depro.ImageProduct.image2"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image2" alt=""></a></div>
                                        <div class="item"><a href="~/img/products/ProductofUser/@depro.ImageProduct.image3"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image3" alt=""></a></div>
                                        <div class="item"><a href="~/img/products/ProductofUser/@depro.ImageProduct.image4"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image4" alt=""></a></div>
                                        <div class="item"><a href="~/img/products/ProductofUser/@depro.ImageProduct.image5"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image5" alt=""></a></div>
                                    </div>
                                </div>
                            </figure>
                            <div class="mk-product__variants" data-item="4" data-md="4" data-sm="4" data-arrow="false">
                                <div class="item"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image1" alt=""></div>
                                <div class="item"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image2" alt=""></div>
                                <div class="item"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image3" alt=""></div>
                                <div class="item"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image4" alt=""></div>
                                <div class="item"><img src="~/img/products/ProductofUser/@depro.ImageProduct.image5" alt=""></div>
                            </div>
                        </div>
                        <div class="mk-product__info">
                            <h2 style="font-size: 30px; font-weight: 600;">@depro.namepro</h2>
                            <p>Sold By:<a href="shop-default.html"><strong> @depro.User.name</strong></a></p>
                            <h4 class="mk-product__price">Auction time: @depro.timestart @Content.getDate(depro.datestart.Value) - @depro.timeend @Content.getDate(depro.dateend.Value)</h4>
                            <style>
                                .countdowncd {
                                    display: flex;
                                }

                                .countdowncd .timecd {
                                    margin-right: 10px;
                                    text-align: center;
                                }

                                .countdowncd .dongho {
                                    text-align: center;
                                    border: 3px solid #f4f9ff;
                                    background-color: #f4f9ff;
                                    box-shadow: 2px 5px 5px;
                                    padding-top: 4px;
                                    width: 70px;
                                    height: 80px;
                                    font-size: 45px;
                                    color: #156614;
                                }

                                .twodot {
                                    margin-right: 10px;
                                    font-size: 45px;
                                    padding-top: 10px;
                                }
                                #click_endtime_reset {
                                    position: absolute;
                                    width: 1px;
                                    height: 1px;
                                    z-index: -100;
                                    background-color: white;
                                    border: none;
                                }
                            </style>
                            <!--//COUNTDOWN-->
                            <input id="ngayend" style="display: none" value="@Content.getDateTimeFormat(depro.dateend.Value, depro.timeend)" />
                            <div id="countdowncd" class="countdowncd">
                                <div class="timecd">
                                    <h2 id="daycd" class="dongho">00</h2>
                                    <small>Days</small>
                                </div>
                                <h2 class="twodot">:</h2>
                                <div class="timecd">
                                    <h2 id="hourcd" class="dongho">00</h2>
                                    <small>Hours</small>
                                </div>
                                <h2 class="twodot">:</h2>
                                <div class="timecd">
                                    <h2 id="minutecd" class="dongho">00</h2>
                                    <small>Minutes</small>
                                </div>
                                <h2 class="twodot">:</h2>
                                <div class="timecd">
                                    <h2 id="secondcd" class="dongho">00</h2>
                                    <small>Seconds</small>
                                </div>
                                @*Nut an, dung de goi ham khi phien dau gia het han*@
                                <input id="click_endtime_reset" class="btn btn-primary" type="button" value="O" onclick="location.href='@Url.Action("EndResetAuction", "Home", new { idUser = Content.FindidUserWinner(dsauction,depro.idproduct), idproduct= depro.idproduct})'" /> 
                            </div>
                            <style>
                                .pricebuy {
                                    background-color: #f4f9ff;
                                    width: 100%;
                                    height: 70px;
                                    display: flex;
                                    align-items: center;
                                    padding-top: 2px;
                                }

                                .priceauction {
                                    background-color: #f4f9ff;
                                    width: 100%;
                                    height: 170px;
                                    margin-top: 20px;
                                    padding-top: 15px;
                                }

                                .pricebuy small {
                                    margin-left: 15px;
                                    font-size: 20px;
                                    font-weight: 600;
                                    color: black;
                                    font-family: fangsong;
                                }

                                .priceauction small {
                                    margin-left: 15px;
                                    font-size: 20px;
                                    font-weight: 600;
                                    color: black;
                                    font-family: fangsong;
                                    float: left;
                                    margin-top: 7px;
                                }

                                .priceauction span {
                                    color: orangered;
                                    font-size: 27px;
                                    float: right;
                                    margin-right: 340px;
                                }

                                .pricebuy span {
                                    color: orangered;
                                    font-size: 27px;
                                    margin-left: 25px;
                                    margin-left: auto;
                                }

                                .inputauction {
                                    display: inline-flex;
                                }

                                .priceauction .inputauction input {
                                    height: 50px;
                                    width: 335px;
                                    margin-right: 30px;
                                    font-size: 18px;
                                    padding-left: 10px;
                                    margin: 5px 0px 0px 15px;
                                    border: 1px solid #86bfe4;
                                }

                                .table_auction {
                                    position: absolute;
                                    text-align: -webkit-center;
                                    top: 10%;
                                    left: 33%;
                                    border: 1px solid #dedede;
                                    z-index: 1000;
                                    width: 560px;
                                    height: 580px;
                                    background-color: white;
                                    padding: 10px 20px 0px 20px;
                                    overflow-y: scroll;
                                    box-shadow: 5px 5px 5px;
                                    display: none;
                                }

                                    .table_auction table tr th {
                                        border-bottom: 1px solid #cacaca;
                                    }
                            </style>
                            <div class="mk-product__shopping">
                                <div class="pricebuy">
                                    <small>Price Buy:</small>
                                    <span>@depro.pricebuy <t style="font-size: 15px;font-family: fangsong;">VND</t></span>
                                    <button id="btn-paynow" onclick="location.href='@Url.Action("Index", "Payment", new {idproduct = depro.idproduct})'" style="width: 200px;font-size: 17px; height: 40px; margin-left: auto; margin-right: 190px; border-radius: 5px; background-color:#1f921f" class="btn btn-success">
                                        <i style=" font-size: 20px; margin-right: 12px;" class="fas fa-donate"></i>BUY NOW
                                    </button>
                                </div>
                                <div class="priceauction">
                                    @if (dsauction.Count != 0 && dsauction[vitri].idproduct == depro.idproduct)
                                    {           
                                        <small>Price Now:</small> <span>@dsauction[vitri].priceup <t style="font-size: 15px;font-family: fangsong;">VND</t> <t><img src="~/img/products/load2.gif" style="width: 100px;margin-left: -20px;margin-top: -5px;" /></t></span>
                                    }
                                    else
                                    {
                                        <small>Price Now:</small> <span>@depro.priceauction <t style="font-size: 15px;font-family: fangsong;">VND</t> <t><img src="~/img/products/load2.gif" style="width: 100px;margin-left: -20px;margin-top: -5px;" /></t></span>
                                    }
                                    <div class="inputauction">
                                        <form method="post">
                                            <input style="display: none" name="idproduct" value="@depro.idproduct" />
                                            @if (dsauction.Count != 0 && dsauction[vitri].idproduct == depro.idproduct)
                                            {
                                                <input style="display: none" name="pricenoww" value="@dsauction[vitri].priceup" />
                                            }
                                            else
                                            {
                                                <input style="display: none" name="pricenoww" value="@depro.priceauction" />
                                            }
                                            <input onChange="format_curency(this)" onkeypress="return isNumberKey(event)" name="priceup" type="text" placeholder="Auction...." />
                                            @if (check == "0")
                                            {
                                                <button type="button" id="btn_aclogin" style="width: 60px; height: 50px; margin-top: -5px; background-color: #1e88e5" class="btn btn-primary"><i style=" font-size: 25px;" class="fas fa-gavel"></i></button>
                                            }
                                            else if (check == "2" || check == "3")
                                            {
                                                <button id="btn_auction" type="submit" style="width: 60px; height: 50px; margin-top: -5px; background-color: #1e88e5" class="btn btn-primary"><i style=" font-size: 25px;" class="fas fa-gavel"></i></button>
                                            }
                                        </form>
                                        <button id="btntable_auction" style="width: 60px; height: 50px; margin-top: 6px; margin-left: 5px; background-color: #1e88e5" class="btn btn-primary"><i style=" font-size: 25px;" class="fas fa-chart-bar"></i></button>
                                        <button id="btn_cart" style="width: 60px; height: 50px; margin-top: 6px; margin-left: 5px; background-color: #1e88e5" class="btn btn-primary"><i style=" font-size: 25px;" class="fas fa-cart-plus"></i></button>
                                    </div>
                                    <p style="margin-left: 15px"><i>*Please enter the price you want to bid in the box!</i></p>
                                </div>
                                <div class="table_auction">
                                    <img src="~/img/bg/banner_aution.jpg" width="100%" height="200px" />
                                    <h1 style="background-color:#dcebfa">List of users participating in the auction</h1>
                                    <hr />
                                    <table border="0" cellspacing="0" cellpadding="5" width="520" style="text-align: center">
                                        <tr>
                                            <th>ID User</th>
                                            <th>Name User</th>
                                            <th>Price Auction</th>
                                            <th>Date</th>
                                            <th>Time</th>
                                            <th>Status</th>
                                        </tr>
                                        <tbody>                                            
                                            @for (int i = dsauction.Count - 1; i >= 0; i--)
                                            {
                                                if (dsauction[i].idproduct == depro.idproduct)
                                                {                                                    
                                                    <tr class="@rowfirst">
                                                        <td>@dsauction[i].idUser</td>
                                                        <td>*****</td>
                                                        <td>@dsauction[i].priceup</td>
                                                        <td>@Content.getDate(dsauction[i].dateauction.Value)</td>
                                                        <td>@dsauction[i].timeauction</td>
                                                        <td>@dsauction[i].statusauction</td>
                                                    </tr>
                                                    {
                                                        rowfirst += "a";
                                                    }
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mk-product__content mk-tab-root">
                        <ul class="mk-tab-list" style="background-color: #f4f9ff;">
                            <li class="active"><a href="#tab-1">Description</a></li>
                            <li><a href="#tab-2">Specification</a></li>
                            <li><a href="#tab-3">Vendor</a></li>
                            <li><a href="#tab-4">Reviews (1)</a></li>
                            <li><a href="#tab-5">Questions and Answers</a></li>
                        </ul>
                        <div class="mk-tabs">
                            <div class="mk-tab active" id="tab-1">
                                <div class="mk-document">
                                    <p>@depro.descriptionpro</p>
                                </div>
                            </div>
                            <div class="mk-tab" id="tab-2">
                                <div class="table-responsive">
                                    <table class="table table-bordered mk-table mk-table--specification">
                                        <tbody>
                                            <tr>
                                                <td>Color</td>
                                                <td>@depro.DesciptionProduct.color</td>
                                            </tr>
                                            <tr>
                                                <td>Size</td>
                                                <td>@depro.DesciptionProduct.size</td>
                                            </tr>
                                            <tr>
                                                <td>Material</td>
                                                <td>@depro.DesciptionProduct.material</td>
                                            </tr>
                                            <tr>
                                                <td>Condition</td>
                                                <td>@depro.DesciptionProduct.condition</td>
                                            </tr>
                                            <tr>
                                                <td>Origin</td>
                                                <td>@depro.DesciptionProduct.origin</td>
                                            </tr>
                                            <tr>
                                                <td>Other</td>
                                                <td>@depro.DesciptionProduct.other</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="mk-tab" id="tab-3">
                                <p>Người bán: @depro.User.name</p>
                                <p>Số điện thoại: @depro.User.phone</p>
                                <p>Email: @depro.User.email</p>
                                <p>Địa chỉ: @depro.User.address</p>
                            </div>
                            <div class="mk-tab" id="tab-4">
                                <div class="row">
                                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-12 ">
                                        <div class="mk-block--average-rating">
                                            <div class="mk-block__header">
                                                <h3>4.00</h3>
                                                <select class="mk-rating" data-read-only="true">
                                                    <option value="1">1</option>
                                                    <option value="1">2</option>
                                                    <option value="1">3</option>
                                                    <option value="1">4</option>
                                                    <option value="2">5</option>
                                                </select><span>1 Review</span>
                                            </div>
                                            <div class="mk-block__star">
                                                <span>5 Star</span>
                                                <div class="mk-progress" data-value="100"><span></span></div><span>100%</span>
                                            </div>
                                            <div class="mk-block__star">
                                                <span>4 Star</span>
                                                <div class="mk-progress" data-value="0"><span></span></div><span>0</span>
                                            </div>
                                            <div class="mk-block__star">
                                                <span>3 Star</span>
                                                <div class="mk-progress" data-value="0"><span></span></div><span>0</span>
                                            </div>
                                            <div class="mk-block__star">
                                                <span>2 Star</span>
                                                <div class="mk-progress" data-value="0"><span></span></div><span>0</span>
                                            </div>
                                            <div class="mk-block__star">
                                                <span>1 Star</span>
                                                <div class="mk-progress" data-value="0"><span></span></div><span>0</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-7 col-lg-7 col-md-12 col-sm-12 col-12 ">
                                        <form class="mk-form--review" action="http://marketkit.retailboosters.ng/index.html" method="get">
                                            <h4>Submit Your Review</h4>
                                            <p>Your email address will not be published. Required fields are marked<sup>*</sup></p>
                                            <div class="form-group form-group__rating">
                                                <label>Your rating of this product</label>
                                                <select class="mk-rating" data-read-only="false">
                                                    <option value="0">0</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <textarea class="form-control" rows="6" placeholder="Write your review here"></textarea>
                                            </div>
                                            <div class="row">
                                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12  ">
                                                    <div class="form-group">
                                                        <input class="form-control" type="text" placeholder="Your Name">
                                                    </div>
                                                </div>
                                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12  ">
                                                    <div class="form-group">
                                                        <input class="form-control" type="email" placeholder="Your Email">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group submit">
                                                <button class="mk-btn">Submit Review</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="mk-tab" id="tab-5">
                                <div class="mk-block--questions-answers">
                                    <h3>Questions and Answers</h3>
                                    <div class="form-group">
                                        <input class="form-control" type="text" placeholder="Have a question? Search for answer?">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function format_curency(a) {
        a.value = a.value.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
    }
    $(document).ready(function () {
        $('.quantity-input').bind("cut copy paste drag drop", function (e) {
            e.preventDefault();
        });
    });
    function isNumberKey(e) {
        var charCode = (e.which) ? e.which : e.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
</script>
<script>
    $(document).ready(function () {
        $("#btntable_auction").click(function () {
            var display = $(".table_auction").css("display");
            if (display != "none") {
                $(".table_auction").attr("style", "display:none;");
            }
            else {
                $(".table_auction").attr("style", "display:block;");
            }
        })
    })

    $(document).ready(function () {
        $("#btn_aclogin").click(function () {
            alert("PLEASE LOGIN IN THE SYSTEM!")
        })
    })
</script>


